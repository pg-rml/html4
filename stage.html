<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>흐트므르IV</title>
<style>
	*{
		margin: 0;
		padding: 0;

	}
	div{
		width: 1280px;
		height: 720px;
		text-align: center;
	}
	.background{
		background-image: url('./image/background.png');
		background-repeat: no-repeat;
		background-size: contain;
		position:relative;
	}
	.stage img{
		width: 150px;
		height: 150px;
		cursor: pointer;
	}
	.locked img{
		opacity: 0.5;
		pointer-events: none;
	}
</style>
</head>
<body>
<div class = "background"> 
	<div id ="stage1" class="stage" style="position:absolute; width:200px; height:200px; transform: translate(100px, 180px);">
		<img alt = "Stage1" src = "./image/SD/kim.png" onclick="goStage(1)">
	</div>

	<div id ="stage2" class="stage locked" style="position:absolute; width:200px; height:200px; transform: translate(250px, 380px);">
		<img alt = "Stage2" src="./image/SD/earth.png" onclick="goStage(2)">
	</div>

	<div id ="stage3" class="stage locked" style="position:absolute; width:200px; height:200px; transform: translate(500px, 180px);">
		<img alt = "Stage3" src="./image/SD/mars.png" onclick="goStage(3)">
	</div>

	<div id ="stage4" class="stage locked" style="position:absolute; width:200px; height:200px; transform: translate(700px, 380px);">
		<img alt = "Stage4" src="./image/SD/saturn_on.png" onclick="goStage(4)">
	</div>

	<div id ="stage5" class="stage locked" style="position:absolute; width:200px; height:200px; transform: translate(950px, 180px);">
		<img alt = "Stage5" src="./image/SD/andro.png" onclick="goStage(5)">
	</div>

	<div id ="clear" style="position:absolute; width:300px; height:120px; transform: translate(980px, 600px);">
		<img alt = "Stage clear" src="./image/button/clear.png">
	</div>
</div>

<script type="text/javascript">
	let currentStage = localStorage.getItem('currentStage') || 1;

	function update() {
		for(let i = 1; i <= 5; i++) {
			const stage = document.getElementById("stage" + i);
			if(i <= currentStage) {
				stage.classList.remove("locked");
			}
			else {
				stage.classList.add("locked");
			}
		}
	}

	function goStage(stageNum) {
		if(stageNum <= currentStage) {
			location.href = 'stage' + stageNum + '.html'; //스테이지 html 연동

			if(stageNum == currentStage && currentStage < 5) {
				currentStage++;
				localStorage.setItem('currentStage', currentStage);
				update();
			}
		}
	}

	document.getElementById("clear").addEventListener('click', () => {
		currentStage = 1;
		localStorage.setItem('currentStage', currentStage);
		update();
		alert("스테이지 정보가 초기화 되었습니다.");
	} );

	update();
</script>
</body>
</html>